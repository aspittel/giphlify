{"id":"node_modules/@aws-sdk/middleware-user-agent/dist/cjs/middleware.js","dependencies":[{"name":"/Users/spittela/code/giphlify/package.json","includedInParent":true,"mtime":1600722302325},{"name":"/Users/spittela/code/giphlify/.babelrc","includedInParent":true,"mtime":1599669969128},{"name":"/Users/spittela/code/giphlify/node_modules/@aws-sdk/middleware-user-agent/package.json","includedInParent":true,"mtime":1600722667589},{"name":"tslib","loc":{"line":4,"column":22},"parent":"/Users/spittela/code/giphlify/node_modules/@aws-sdk/middleware-user-agent/dist/cjs/middleware.js","resolved":"/Users/spittela/code/giphlify/node_modules/tslib/tslib.es6.js"},{"name":"@aws-sdk/protocol-http","loc":{"line":5,"column":30},"parent":"/Users/spittela/code/giphlify/node_modules/@aws-sdk/middleware-user-agent/dist/cjs/middleware.js","resolved":"/Users/spittela/code/giphlify/node_modules/@aws-sdk/protocol-http/dist/cjs/index.js"}],"generated":{"js":"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getUserAgentPlugin = exports.getUserAgentMiddlewareOptions = exports.userAgentMiddleware = void 0;\nvar tslib_1 = require(\"tslib\");\nvar protocol_http_1 = require(\"@aws-sdk/protocol-http\");\nfunction userAgentMiddleware(options) {\n    return function (next) { return function (args) {\n        var request = args.request;\n        if (!protocol_http_1.HttpRequest.isInstance(request))\n            return next(args);\n        var headers = request.headers;\n        var userAgentHeader = options.runtime === \"node\" ? \"user-agent\" : \"x-amz-user-agent\";\n        if (!headers[userAgentHeader]) {\n            headers[userAgentHeader] = \"\" + options.defaultUserAgent;\n        }\n        else {\n            headers[userAgentHeader] += \" \" + options.defaultUserAgent;\n        }\n        if (options.customUserAgent) {\n            headers[userAgentHeader] += \" \" + options.customUserAgent;\n        }\n        return next(tslib_1.__assign(tslib_1.__assign({}, args), { request: request }));\n    }; };\n}\nexports.userAgentMiddleware = userAgentMiddleware;\nexports.getUserAgentMiddlewareOptions = {\n    name: \"getUserAgentMiddleware\",\n    step: \"build\",\n    tags: [\"SET_USER_AGENT\", \"USER_AGENT\"],\n};\nexports.getUserAgentPlugin = function (config) { return ({\n    applyToStack: function (clientStack) {\n        clientStack.add(userAgentMiddleware(config), exports.getUserAgentMiddlewareOptions);\n    },\n}); };\n"},"sourceMaps":{"js":{"version":3,"file":"middleware.js","sourceRoot":"","sources":["../../src/middleware.ts"],"names":[],"mappings":";;;;AAAA,wDAAqD;AAYrD,SAAgB,mBAAmB,CAAC,OAAgC;IAClE,OAAO,UAAgC,IAA4B,IAA6B,OAAA,UAC9F,IAAgC;QAExB,IAAA,OAAO,GAAK,IAAI,QAAT,CAAU;QACzB,IAAI,CAAC,2BAAW,CAAC,UAAU,CAAC,OAAO,CAAC;YAAE,OAAO,IAAI,CAAC,IAAI,CAAC,CAAC;QAChD,IAAA,OAAO,GAAK,OAAO,QAAZ,CAAa;QAC5B,IAAM,eAAe,GAAG,OAAO,CAAC,OAAO,KAAK,MAAM,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,kBAAkB,CAAC;QACvF,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,EAAE;YAC7B,OAAO,CAAC,eAAe,CAAC,GAAG,KAAG,OAAO,CAAC,gBAAkB,CAAC;SAC1D;aAAM;YACL,OAAO,CAAC,eAAe,CAAC,IAAI,MAAI,OAAO,CAAC,gBAAkB,CAAC;SAC5D;QACD,IAAI,OAAO,CAAC,eAAe,EAAE;YAC3B,OAAO,CAAC,eAAe,CAAC,IAAI,MAAI,OAAO,CAAC,eAAiB,CAAC;SAC3D;QACD,OAAO,IAAI,uCACN,IAAI,KACP,OAAO,SAAA,IACP,CAAC;IACL,CAAC,EAnB+F,CAmB/F,CAAC;AACJ,CAAC;AArBD,kDAqBC;AAEY,QAAA,6BAA6B,GAAwB;IAChE,IAAI,EAAE,wBAAwB;IAC9B,IAAI,EAAE,OAAO;IACb,IAAI,EAAE,CAAC,gBAAgB,EAAE,YAAY,CAAC;CACvC,CAAC;AAEW,QAAA,kBAAkB,GAAG,UAAC,MAA+B,IAA0B,OAAA,CAAC;IAC3F,YAAY,EAAE,UAAC,WAAW;QACxB,WAAW,CAAC,GAAG,CAAC,mBAAmB,CAAC,MAAM,CAAC,EAAE,qCAA6B,CAAC,CAAC;IAC9E,CAAC;CACF,CAAC,EAJ0F,CAI1F,CAAC","sourcesContent":["import { HttpRequest } from \"@aws-sdk/protocol-http\";\nimport {\n  BuildHandler,\n  BuildHandlerArguments,\n  BuildHandlerOptions,\n  BuildHandlerOutput,\n  MetadataBearer,\n  Pluggable,\n} from \"@aws-sdk/types\";\n\nimport { UserAgentResolvedConfig } from \"./configurations\";\n\nexport function userAgentMiddleware(options: UserAgentResolvedConfig) {\n  return <Output extends MetadataBearer>(next: BuildHandler<any, any>): BuildHandler<any, any> => (\n    args: BuildHandlerArguments<any>\n  ): Promise<BuildHandlerOutput<Output>> => {\n    const { request } = args;\n    if (!HttpRequest.isInstance(request)) return next(args);\n    const { headers } = request;\n    const userAgentHeader = options.runtime === \"node\" ? \"user-agent\" : \"x-amz-user-agent\";\n    if (!headers[userAgentHeader]) {\n      headers[userAgentHeader] = `${options.defaultUserAgent}`;\n    } else {\n      headers[userAgentHeader] += ` ${options.defaultUserAgent}`;\n    }\n    if (options.customUserAgent) {\n      headers[userAgentHeader] += ` ${options.customUserAgent}`;\n    }\n    return next({\n      ...args,\n      request,\n    });\n  };\n}\n\nexport const getUserAgentMiddlewareOptions: BuildHandlerOptions = {\n  name: \"getUserAgentMiddleware\",\n  step: \"build\",\n  tags: [\"SET_USER_AGENT\", \"USER_AGENT\"],\n};\n\nexport const getUserAgentPlugin = (config: UserAgentResolvedConfig): Pluggable<any, any> => ({\n  applyToStack: (clientStack) => {\n    clientStack.add(userAgentMiddleware(config), getUserAgentMiddlewareOptions);\n  },\n});\n"]}},"error":null,"hash":"04db591445779bc7660a54ea858807bc","cacheData":{"env":{}}}