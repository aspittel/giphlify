{"id":"node_modules/@aws-sdk/middleware-content-length/dist/cjs/index.js","dependencies":[{"name":"/Users/spittela/code/giphlify/package.json","includedInParent":true,"mtime":1600722302325},{"name":"/Users/spittela/code/giphlify/.babelrc","includedInParent":true,"mtime":1599669969128},{"name":"/Users/spittela/code/giphlify/node_modules/@aws-sdk/middleware-content-length/package.json","includedInParent":true,"mtime":1600722667589},{"name":"tslib","loc":{"line":4,"column":22},"parent":"/Users/spittela/code/giphlify/node_modules/@aws-sdk/middleware-content-length/dist/cjs/index.js","resolved":"/Users/spittela/code/giphlify/node_modules/tslib/tslib.es6.js"},{"name":"@aws-sdk/protocol-http","loc":{"line":5,"column":30},"parent":"/Users/spittela/code/giphlify/node_modules/@aws-sdk/middleware-content-length/dist/cjs/index.js","resolved":"/Users/spittela/code/giphlify/node_modules/@aws-sdk/protocol-http/dist/cjs/index.js"}],"generated":{"js":"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getContentLengthPlugin = exports.contentLengthMiddlewareOptions = exports.contentLengthMiddleware = void 0;\nvar tslib_1 = require(\"tslib\");\nvar protocol_http_1 = require(\"@aws-sdk/protocol-http\");\nvar CONTENT_LENGTH_HEADER = \"content-length\";\nfunction contentLengthMiddleware(bodyLengthChecker) {\n    var _this = this;\n    return function (next) { return function (args) { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n        var request, body, headers, length;\n        var _a;\n        return tslib_1.__generator(this, function (_b) {\n            request = args.request;\n            if (protocol_http_1.HttpRequest.isInstance(request)) {\n                body = request.body, headers = request.headers;\n                if (body &&\n                    Object.keys(headers)\n                        .map(function (str) { return str.toLowerCase(); })\n                        .indexOf(CONTENT_LENGTH_HEADER) === -1) {\n                    length = bodyLengthChecker(body);\n                    if (length !== undefined) {\n                        request.headers = tslib_1.__assign(tslib_1.__assign({}, request.headers), (_a = {}, _a[CONTENT_LENGTH_HEADER] = String(length), _a));\n                    }\n                }\n            }\n            return [2 /*return*/, next(tslib_1.__assign(tslib_1.__assign({}, args), { request: request }))];\n        });\n    }); }; };\n}\nexports.contentLengthMiddleware = contentLengthMiddleware;\nexports.contentLengthMiddlewareOptions = {\n    step: \"build\",\n    tags: [\"SET_CONTENT_LENGTH\", \"CONTENT_LENGTH\"],\n    name: \"contentLengthMiddleware\",\n};\nexports.getContentLengthPlugin = function (options) { return ({\n    applyToStack: function (clientStack) {\n        clientStack.add(contentLengthMiddleware(options.bodyLengthChecker), exports.contentLengthMiddlewareOptions);\n    },\n}); };\n"},"sourceMaps":{"js":{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/index.ts"],"names":[],"mappings":";;;;AAAA,wDAAqD;AAYrD,IAAM,qBAAqB,GAAG,gBAAgB,CAAC;AAE/C,SAAgB,uBAAuB,CAAC,iBAAuC;IAA/E,iBA4BC;IA3BC,OAAO,UAAgC,IAA+B,IAAgC,OAAA,UACpG,IAAgC;;;;YAE1B,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;YAC7B,IAAI,2BAAW,CAAC,UAAU,CAAC,OAAO,CAAC,EAAE;gBAC3B,IAAI,GAAc,OAAO,KAArB,EAAE,OAAO,GAAK,OAAO,QAAZ,CAAa;gBAClC,IACE,IAAI;oBACJ,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;yBACjB,GAAG,CAAC,UAAC,GAAG,IAAK,OAAA,GAAG,CAAC,WAAW,EAAE,EAAjB,CAAiB,CAAC;yBAC/B,OAAO,CAAC,qBAAqB,CAAC,KAAK,CAAC,CAAC,EACxC;oBACM,MAAM,GAAG,iBAAiB,CAAC,IAAI,CAAC,CAAC;oBACvC,IAAI,MAAM,KAAK,SAAS,EAAE;wBACxB,OAAO,CAAC,OAAO,yCACV,OAAO,CAAC,OAAO,gBACjB,qBAAqB,IAAG,MAAM,CAAC,MAAM,CAAC,MACxC,CAAC;qBACH;iBACF;aACF;YAED,sBAAO,IAAI,uCACN,IAAI,KACP,OAAO,SAAA,IACP,EAAC;;SACJ,EA1BqG,CA0BrG,CAAC;AACJ,CAAC;AA5BD,0DA4BC;AAEY,QAAA,8BAA8B,GAAwB;IACjE,IAAI,EAAE,OAAO;IACb,IAAI,EAAE,CAAC,oBAAoB,EAAE,gBAAgB,CAAC;IAC9C,IAAI,EAAE,yBAAyB;CAChC,CAAC;AAEW,QAAA,sBAAsB,GAAG,UAAC,OAAoD,IAA0B,OAAA,CAAC;IACpH,YAAY,EAAE,UAAC,WAAW;QACxB,WAAW,CAAC,GAAG,CAAC,uBAAuB,CAAC,OAAO,CAAC,iBAAiB,CAAC,EAAE,sCAA8B,CAAC,CAAC;IACtG,CAAC;CACF,CAAC,EAJmH,CAInH,CAAC","sourcesContent":["import { HttpRequest } from \"@aws-sdk/protocol-http\";\nimport {\n  BodyLengthCalculator,\n  BuildHandler,\n  BuildHandlerArguments,\n  BuildHandlerOptions,\n  BuildHandlerOutput,\n  BuildMiddleware,\n  MetadataBearer,\n  Pluggable,\n} from \"@aws-sdk/types\";\n\nconst CONTENT_LENGTH_HEADER = \"content-length\";\n\nexport function contentLengthMiddleware(bodyLengthChecker: BodyLengthCalculator): BuildMiddleware<any, any> {\n  return <Output extends MetadataBearer>(next: BuildHandler<any, Output>): BuildHandler<any, Output> => async (\n    args: BuildHandlerArguments<any>\n  ): Promise<BuildHandlerOutput<Output>> => {\n    const request = args.request;\n    if (HttpRequest.isInstance(request)) {\n      const { body, headers } = request;\n      if (\n        body &&\n        Object.keys(headers)\n          .map((str) => str.toLowerCase())\n          .indexOf(CONTENT_LENGTH_HEADER) === -1\n      ) {\n        const length = bodyLengthChecker(body);\n        if (length !== undefined) {\n          request.headers = {\n            ...request.headers,\n            [CONTENT_LENGTH_HEADER]: String(length),\n          };\n        }\n      }\n    }\n\n    return next({\n      ...args,\n      request,\n    });\n  };\n}\n\nexport const contentLengthMiddlewareOptions: BuildHandlerOptions = {\n  step: \"build\",\n  tags: [\"SET_CONTENT_LENGTH\", \"CONTENT_LENGTH\"],\n  name: \"contentLengthMiddleware\",\n};\n\nexport const getContentLengthPlugin = (options: { bodyLengthChecker: BodyLengthCalculator }): Pluggable<any, any> => ({\n  applyToStack: (clientStack) => {\n    clientStack.add(contentLengthMiddleware(options.bodyLengthChecker), contentLengthMiddlewareOptions);\n  },\n});\n"]}},"error":null,"hash":"76f05d1e9bd440503ea8843a9efe8c3d","cacheData":{"env":{}}}